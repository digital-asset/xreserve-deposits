import{k as f,t as _,i as A,I as N}from"./isAddress-CPn3cQHx.js";import{$ as c,aj as u,a0 as k,ak as O,a1 as g,al as h,am as ee,an as te,ao as E,ap as ne,aq as re,a2 as C}from"./index-nwO4dCB8.js";function oe(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Ze=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Je=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Ke=/^\(.+?\).*?$/,j=/^tuple(?<array>(\[(\d*)\])*)$/;function w(e){let t=e.type;if(j.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let o=0;o<n;o++){const s=e.components[o];t+=w(s),o<n-1&&(t+=", ")}const r=oe(j,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,w({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function b(e){let t="";const n=e.length;for(let r=0;r<n;r++){const o=e[r];t+=w(o),r!==n-1&&(t+=", ")}return t}function se(e){var t;return e.type==="function"?`function ${e.name}(${b(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${b(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${b(e.inputs)})`:e.type==="error"?`error ${e.name}(${b(e.inputs)})`:e.type==="constructor"?`constructor(${b(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}function $(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new ye(e.type);return`${e.name}(${x(e.inputs,{includeName:t})})`}function x(e,{includeName:t=!1}={}){return e?e.map(n=>ie(n,{includeName:t})).join(t?", ":","):""}function ie(e,{includeName:t}){return e.type.startsWith("tuple")?`(${x(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}class Qe extends c{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class Xe extends c{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class _e extends c{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${x(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class et extends c{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class ae extends c{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class ce extends c{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${u(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class ue extends c{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class tt extends c{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class nt extends c{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class rt extends c{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class ot extends c{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class st extends c{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class it extends c{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class F extends c{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class at extends c{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class ct extends c{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class de extends c{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${$(t.abiItem)}\`, and`,`\`${n.type}\` in \`${$(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class fe extends c{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}}class ut extends c{constructor({abiItem:t,data:n,params:r,size:o}){super([`Data size of ${o} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${x(r,{includeName:!0})})`,`Data:   ${n} (${o} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=o}}class dt extends c{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${$(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class pe extends c{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ft extends c{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}class le extends c{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}}class ye extends c{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}const he=e=>f(_(e));function ge(e){return he(e)}function me(e){let t=!0,n="",r=0,o="",s=!1;for(let a=0;a<e.length;a++){const i=e[a];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(o))o="";else if(o+=i,i===")"){s=!0;break}continue}if(i===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}o+=i,n+=i}}if(!s)throw new c("Unable to normalize signature.");return o}const be=e=>{const t=typeof e=="string"?e:se(e);return me(t)};function L(e){return ge(be(e))}const Ae=L;function p(e){return typeof e[0]=="string"?H(e):$e(e)}function $e(e){let t=0;for(const o of e)t+=o.length;const n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}function H(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function R(e,t,n,{strict:r}={}){return k(e,{strict:!1})?Ee(e,t,n,{strict:r}):xe(e,t,n,{strict:r})}function W(e,t){if(typeof t=="number"&&t>0&&t>u(e)-1)throw new O({offset:t,position:"start",size:u(e)})}function V(e,t,n){if(typeof t=="number"&&typeof n=="number"&&u(e)!==n-t)throw new O({offset:n,position:"end",size:u(e)})}function xe(e,t,n,{strict:r}={}){W(e,t);const o=e.slice(t,n);return r&&V(o,t,n),o}function Ee(e,t,n,{strict:r}={}){W(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&V(o,t,n),o}const we=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,q=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function I(e,t){if(e.length!==t.length)throw new ue({expectedLength:e.length,givenLength:t.length});const n=ve({params:e,values:t}),r=T(n);return r.length===0?"0x":r}function ve({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(S({param:e[r],value:t[r]}));return n}function S({param:e,value:t}){const n=je(e.type);if(n){const[r,o]=n;return Se(t,{length:r,param:{...e,type:o}})}if(e.type==="tuple")return ze(t,{param:e});if(e.type==="address")return Ie(t);if(e.type==="bool")return Me(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,o="256"]=q.exec(e.type)??[];return Be(t,{signed:r,size:Number(o)})}if(e.type.startsWith("bytes"))return Te(t,{param:e});if(e.type==="string")return De(t);throw new pe(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function T(e){let t=0;for(let s=0;s<e.length;s++){const{dynamic:a,encoded:i}=e[s];a?t+=32:t+=u(i)}const n=[],r=[];let o=0;for(let s=0;s<e.length;s++){const{dynamic:a,encoded:i}=e[s];a?(n.push(g(t+o,{size:32})),r.push(i),o+=u(i)):n.push(i)}return p([...n,...r])}function Ie(e){if(!A(e))throw new N({address:e});return{dynamic:!1,encoded:h(e.toLowerCase())}}function Se(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new le(e);if(!r&&e.length!==t)throw new ae({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let o=!1;const s=[];for(let a=0;a<e.length;a++){const i=S({param:n,value:e[a]});i.dynamic&&(o=!0),s.push(i)}if(r||o){const a=T(s);if(r){const i=g(s.length,{size:32});return{dynamic:!0,encoded:s.length>0?p([i,a]):i}}if(o)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:p(s.map(({encoded:a})=>a))}}function Te(e,{param:t}){const[,n]=t.type.split("bytes"),r=u(e);if(!n){let o=e;return r%32!==0&&(o=h(o,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:p([h(g(r,{size:32})),o])}}if(r!==Number.parseInt(n,10))throw new ce({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:h(e,{dir:"right"})}}function Me(e){if(typeof e!="boolean")throw new c(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:h(ee(e))}}function Be(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,o=t?-r-1n:0n;if(e>r||e<o)throw new te({max:r.toString(),min:o.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:g(e,{size:32,signed:t})}}function De(e){const t=E(e),n=Math.ceil(u(t)/32),r=[];for(let o=0;o<n;o++)r.push(h(R(t,o*32,(o+1)*32),{dir:"right"}));return{dynamic:!0,encoded:p([h(g(u(t),{size:32})),...r])}}function ze(e,{param:t}){let n=!1;const r=[];for(let o=0;o<t.components.length;o++){const s=t.components[o],a=Array.isArray(e)?o:s.name,i=S({param:s,value:e[a]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?T(r):p(r.map(({encoded:o})=>o))}}function je(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const U=e=>R(L(e),0,4);function Fe(e){const{abi:t,args:n=[],name:r}=e,o=k(r,{strict:!1}),s=t.filter(i=>o?i.type==="function"?U(i)===r:i.type==="event"?Ae(i)===r:!1:"name"in i&&i.name===r);if(s.length===0)return;if(s.length===1)return s[0];let a;for(const i of s){if(!("inputs"in i))continue;if(!n||n.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==n.length)continue;if(n.every((l,y)=>{const d="inputs"in i&&i.inputs[y];return d?v(l,d):!1})){if(a&&"inputs"in a&&a.inputs){const l=Y(i.inputs,a.inputs,n);if(l)throw new de({abiItem:i,type:l[0]},{abiItem:a,type:l[1]})}a=i}}return a||s[0]}function v(e,t){const n=typeof e,r=t.type;switch(r){case"address":return A(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((o,s)=>v(Object.values(e)[s],o)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(o=>v(o,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Y(e,t,n){for(const r in e){const o=e[r],s=t[r];if(o.type==="tuple"&&s.type==="tuple"&&"components"in o&&"components"in s)return Y(o.components,s.components,n[r]);const a=[o.type,s.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?A(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?A(n[r],{strict:!1}):!1)return a}}const P="/docs/contract/encodeFunctionData";function Pe(e){const{abi:t,args:n,functionName:r}=e;let o=t[0];if(r){const s=Fe({abi:t,args:n,name:r});if(!s)throw new F(r,{docsPath:P});o=s}if(o.type!=="function")throw new F(void 0,{docsPath:P});return{abi:[o],functionName:U($(o))}}function pt(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var i;return e.abi.length===1&&((i=e.functionName)!=null&&i.startsWith("0x"))?e:Pe(e)})(),o=n[0],s=r,a="inputs"in o&&o.inputs?I(o.inputs,t??[]):void 0;return H([s,a??"0x"])}const Ne=`Ethereum Signed Message:
`;function ke(e){const t=typeof e=="string"?E(e):typeof e.raw=="string"?e.raw:ne(e.raw),n=E(`${Ne}${u(t)}`);return p([n,t])}function lt(e,t){return f(ke(e),t)}class Oe extends c{constructor({domain:t}){super(`Invalid domain "${re(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Ce extends c{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Le extends c{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function He(e){const{domain:t,message:n,primaryType:r,types:o}=e,s=(a,i)=>{for(const M of a){const{name:l,type:y}=M,d=i[l],B=y.match(q);if(B&&(typeof d=="number"||typeof d=="bigint")){const[Q,m,X]=B;g(d,{signed:m==="int",size:Number.parseInt(X,10)/8})}if(y==="address"&&typeof d=="string"&&!A(d))throw new N({address:d});const D=y.match(we);if(D){const[Q,m]=D;if(m&&u(d)!==Number.parseInt(m,10))throw new fe({expectedSize:Number.parseInt(m,10),givenSize:u(d)})}const z=o[y];z&&(We(y),s(z,d))}};if(o.EIP712Domain&&t){if(typeof t!="object")throw new Oe({domain:t});s(o.EIP712Domain,t)}if(r!=="EIP712Domain")if(o[r])s(o[r],n);else throw new Ce({primaryType:r,types:o})}function Re({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function We(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Le({type:e})}function yt(e){const{domain:t={},message:n,primaryType:r}=e,o={EIP712Domain:Re({domain:t}),...e.types};He({domain:t,message:n,primaryType:r,types:o});const s=["0x1901"];return t&&s.push(Ve({domain:t,types:o})),r!=="EIP712Domain"&&s.push(G({data:n,primaryType:r,types:o})),f(p(s))}function Ve({domain:e,types:t}){return G({data:e,primaryType:"EIP712Domain",types:t})}function G({data:e,primaryType:t,types:n}){const r=Z({data:e,primaryType:t,types:n});return f(r)}function Z({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],o=[qe({primaryType:t,types:n})];for(const s of n[t]){const[a,i]=K({types:n,name:s.name,type:s.type,value:e[s.name]});r.push(a),o.push(i)}return I(r,o)}function qe({primaryType:e,types:t}){const n=C(Ue({primaryType:e,types:t}));return f(n)}function Ue({primaryType:e,types:t}){let n="";const r=J({primaryType:e,types:t});r.delete(e);const o=[e,...Array.from(r).sort()];for(const s of o)n+=`${s}(${t[s].map(({name:a,type:i})=>`${i} ${a}`).join(",")})`;return n}function J({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),o=r==null?void 0:r[0];if(n.has(o)||t[o]===void 0)return n;n.add(o);for(const s of t[o])J({primaryType:s.type,types:t},n);return n}function K({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},f(Z({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},f(r)];if(n==="string")return[{type:"bytes32"},f(C(r))];if(n.lastIndexOf("]")===n.length-1){const o=n.slice(0,n.lastIndexOf("[")),s=r.map(a=>K({name:t,type:o,types:e,value:a}));return[{type:"bytes32"},f(I(s.map(([a])=>a),s.map(([,a])=>a)))]}return[{type:n},r]}export{ke as $,it as A,ct as B,nt as C,dt as D,tt as E,le as F,p as G,b as H,ft as I,se as J,Ne as K,ae as L,ce as M,ue as N,fe as O,pe as P,ye as Q,Oe as R,Ce as S,Le as T,Pe as U,$e as V,Ee as W,L as X,be as Y,Ve as Z,G as _,yt as a,Re as a0,He as a1,oe as b,Ze as c,Ke as d,pt as e,$ as f,Fe as g,lt as h,Je as i,I as j,et as k,_e as l,je as m,R as n,U as o,rt as p,H as q,ot as r,xe as s,Ae as t,st as u,ut as v,F as w,at as x,Qe as y,Xe as z};
